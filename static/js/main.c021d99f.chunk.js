(this["webpackJsonpoak-js"]=this["webpackJsonpoak-js"]||[]).push([[0],{32:function(e){e.exports=JSON.parse('{"welcome":{"title":"Welcome to Oak.js","subtitle":"Oak.js is an online javascript IDE, Assembler, Disassembler, and Simulator for assembly languages such as RISC-V and MIPS."},"menus":{"about":"About","settings":"Settings","help":"Help","add_tab":"Add Tab","add_tab_riscv":"Add Tab RISC-V","add_tab_mips":"Add Tab MIPS","load_assembly":"Load Assembly","load_binary":"Load Binary","download_assembly":"Download Assembly","download_binary":"Download Binary (Raw)","download_binary_h":"Download Binary (Verilog Hex Format)","download_memory":"Download Memory"},"panels":{"projectsettings":{"name":"Project Settings","file_name":"File Name","isa":"File Name","memory_size":"Memory Size"}},"about":{"title":"About","core_devs":"Developers","additional_devs":"Special Thanks","translators":"Translators"},"help":{"title":"Help","data":"<p>Oak.js is a web-based assembler, disassembler and simulator for the RISCV instruction set architecture. It is designed after version 2.1 and currently supports most of the RV32I base integer instruction set.</p>\\n<p>\\n    Oak.js starts executing from address 0 and implements a von Neumann structure; i.e., there is no distinction between program data and machine code in binary files. It is the programmer\'s responsibility to make sure static data is not\\n    interpreted as instructions (to halt execution, see environment call 10).\\n</p>\\n<h3>Instruction Support</h3>\\n<h4>RISC-V</h4>\\n<p>Oak.js supports the RV32I base integer instruction set, save for the following instructions:</p>\\n<p><i> fence, fence.i, ebreak, csrrw, csrrs, cssrc, csrrwi, csrrsi, csrrci </i></p>\\n<h4>MIPS</h4>\\n<p>The entire MIPS core integer instruction set is supported.</p>\\n<h4>Pseudoinstructions</h4>\\n<p>\\n    As a limitation of Oak.js\'s architecture, very few pseudoinstructions are supported, and they all expand into only one instruction. The currently supported pseudoinstructions for RISC-V are li, mv, la, jr, scall, and syscall (the last\\n    two just mirror ecall). MIPS does not support pseudoinstructions.\\n</p>\\n<h4>Environment Calls</h4>\\n<p>The calling convention is as follows:</p>\\n<p>\\n    a7<sup>RISC-V</sup>/v0<sup>MIPS</sup> - Service Number <br />\\n    a0-a3 - Arguments\\n</p>\\n<p>The return value will be placed in the same register as the service number.</p>\\n<p>Oak.js supports four environment calls at the moment.</p>\\n<ul>\\n    <li><b>1: Print Integer.</b> Arguments: 0 - Integer to print. Prints integer to console.</li>\\n    <li><b>4: Print String.</b> Arguments: 0 - Address of string to print in memory. Prints string to console.</li>\\n    <li><b>5: Read Integer.</b> Arguments: None. Reads integer from user, stores in a7.</li>\\n    <li><b>8: Read String.</b> Arguments: 0 - Address in memory to read string to.</li>\\n    <li><b>10: Exit.</b> Arguments: None. Concludes execution of the current program.</li>\\n</ul>\\n<h3>Usage</h3>\\n<p>\\n    Input text into the main editor field. Assemble using the <img src=\\"images/assembleHelp.png\\" class=\\"help_icon\\" alt=\\"assemble\\" /> button. You can press <img src=\\"images/playAssembleHelp.png\\" class=\\"help_icon\\" alt=\\"assemble + play\\" /> to\\n    assemble, and then start the simulation. Alternatively, when you have a blank codebase but you have machine code, if you press <img src=\\"images/playHelp.png\\" class=\\"help_icon\\" alt=\\"play\\" /> you can simply directly simulate the machine\\n    code.\\n</p>\\n<p>You can create new tabs to manage multiple files as well, and the tabs do not share any memory or registers so you can keep different things running, no problem. You can add a new tab by going to file and pressing add tab.</p>\\n<p>\\n    The output panel has three output modes: console, memory and instructions. The console shows the output generated by environment calls and shows the status of the editor. The memory shows the state of the memory following simulation.\\n    The Instruction Log shows the step by step disassembly of the program. You can switch between them in the select drop down menu in the top right of the output panel.\\n</p>\\n<p>Registers are also displayed to the right side menu. Simply press the register tab. You can select the view type under the dropdown menu.</p>\\n<h4>Uploading</h4>\\n<p>\\n    You can also upload either assembly code or binary files directly to Oak.js.\\n</p>\\n<p>\\n    To do it, go to the file menu in the top left of the editor, and and press \\"Load Binary\\" or \\"Load Assembly\\" to upload a file. Keep in mind, binaries and assembly files must be in the correct file. After assembly files are uploaded, you\\n    need to press the assemble <img src=\\"images/assembleHelp.png\\" class=\\"help_icon\\" alt=\\"assemble\\" /> button. After either that or the binary file, you must press play <img src=\\"images/playHelp.png\\" class=\\"help_icon\\" alt=\\"play\\" />.\\n</p>\\n<h4>Downloading</h4>\\n<p>\\n    Downloading is similar. Simply open the file menu, and press \\"Download RAM\\", \\"Download Binary\\", or \\"Download Assembly\\". The first two must be opened in a hex editor or other program capable of opening binaries. Assembly files can be\\n    loaded in any text editor.\\n</p>\\n<h4>Keyboard Shortcuts</h4>\\n<p>\\n    <b>F8</b>: Assemble.<br />\\n    <b>F9</b>: Assemble if there\'s assembly code, and simulate.<br />\\n    <b>F10</b>: Step by Step (requires assembly first).\\n</p>\\n"}}')},33:function(e,t,n){e.exports=n(55)},55:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(27),i=n.n(s),l=n(2),o=n(3),u=n(15),c=n(5),p=n(4),d=n(28),m=n.n(d),g=(n(45),n(46),"SELECT_TAB"),h="ADD_TAB",f="UPDATE_TAB",b="DELETE_TAB",v="UPDATE_PROJECT_SETTINGS",y="SET_HELP_VISIBLE",w="SET_ABOUT_VISIBLE",_="SET_SETTINGS_VISIBLE",E=function(e){return{type:_,state:e}},F=function(e){return{type:y,state:e}},S=function(e){return{type:w,state:e}},k=function(e){return{type:g,id:e}},A=function(e,t){return{type:f,index:e,tab:t}},C=function(e,t,n){return{type:v,payload:{file_name:e,memory_size:t,isa:n}}},I=n(7),O=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).addTab=function(){e.props.addTab()},e.handleTabChange=function(t){e.props.selectTab(t);var n=e.props.tabs[t];n&&e.props.setProjectSettings(n.name,n.core.memorySize,n.instruction_set)},e.handleTabClose=function(t,n){t.stopPropagation();var r=e.props.selectedtab;r>=n&&(r-=1),r=Math.min(Math.max(r,0),e.props.tabs.length-1),e.props.selectTab(r);var a=e.props.tabs[r];a&&e.props.setProjectSettings(a.name,a.core.memorySize,a.instruction_set),e.props.deleteTab(n)},e.setEditorValue=function(t){var n=e.props.selectedtab,r=e.props.tabs[n];r.content=t,e.props.updateTab(n,r)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tabs;return a.a.createElement("main",{id:"text_editor",className:"text_editor"},a.a.createElement("ul",{className:"page_tabs"},t.map((function(t,n){return a.a.createElement("li",{onClick:function(){return e.handleTabChange(n)},key:n,className:e.props.selectedtab===n?"selected":""},a.a.createElement("span",null,t.name),a.a.createElement("div",{onClick:function(t){return e.handleTabClose(t,n)}}))})),a.a.createElement("li",{className:"add_tab",onClick:this.addTab})),a.a.createElement(m.a,{mode:"java",theme:"github",onChange:this.setEditorValue,width:"100%",height:"",name:"editor_area",className:"editor_area",value:t[this.props.selectedtab].content,readOnly:this.props.is_disabled,editorProps:{$blockScrolling:1/0}}))}}]),n}(r.Component),j=Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}}),(function(e,t){return{selectTab:function(t){return e(k(t))},updateTab:function(t,n){return e(A(t,n))},deleteTab:function(t){return e(function(e){return{type:b,id:e}}(t))},setProjectSettings:function(t,n,r){return e(C(t,n,r))}}}))(O),T=n(6),x=0,R=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e="",t=this.props.tabs[this.props.selectedtab];return t&&(t.runningStatus===x&&(e=" assemble_ready"),0!==t.console_input_type&&(e+=" simulate_prevent_input")),a.a.createElement("nav",{id:"navigation",className:"navigation"},a.a.createElement("ul",null,a.a.createElement("li",{className:"oak_logo"},a.a.createElement("ul",{className:"drop_down"},a.a.createElement("li",{onClick:this.props.handleAddTabRiscv},a.a.createElement(T.b,{id:"menus.add_tab_riscv"})),a.a.createElement("li",{onClick:this.props.handleAddTabMips},a.a.createElement(T.b,{id:"menus.add_tab_mips"})),a.a.createElement("li",{onClick:this.props.handleLoadAsm},a.a.createElement(T.b,{id:"menus.load_assembly"})),a.a.createElement("li",{onClick:this.props.handleLoadBin},a.a.createElement(T.b,{id:"menus.load_binary"})),a.a.createElement("li",{onClick:this.props.handleDownloadAsm},a.a.createElement(T.b,{id:"menus.download_assembly"})),a.a.createElement("li",{onClick:this.props.downloadBin},a.a.createElement(T.b,{id:"menus.download_binary"})),a.a.createElement("li",{onClick:this.props.downloadBinH},a.a.createElement(T.b,{id:"menus.download_binary_h"})),a.a.createElement("li",{onClick:this.props.downloadRam},a.a.createElement(T.b,{id:"menus.download_memory"})))),a.a.createElement("li",{onClick:this.props.showSettings},a.a.createElement(T.b,{id:"menus.settings"})),a.a.createElement("li",{onClick:this.props.showHelp},a.a.createElement(T.b,{id:"menus.help"})),a.a.createElement("li",{onClick:this.props.showAbout},a.a.createElement(T.b,{id:"menus.about"}))),a.a.createElement("div",{className:"buttons_right"},a.a.createElement("button",{className:"assemble",onClick:this.props.assemble}),a.a.createElement("button",{className:"simulate".concat(e),onClick:this.props.simulate}),a.a.createElement("button",{className:"simulate_step".concat(e),onClick:this.props.stepbystep})))}}]),n}(r.Component),z=Object(T.d)(Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}}),(function(e,t){return{showHelp:function(t){return e(F(t))},showAbout:function(t){return e(S(t))},showSettings:function(t){return e(E(t))}}}))(R)),B=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).renderTabs=function(){return a.a.createElement("ul",{className:"panel_tabs"},a.a.Children.map(r.props.children,(function(e,t){return a.a.createElement("li",{className:r.state.selected===t?"selected":"",key:e.type.display_name,onClick:function(e){return r.handleClickTab(e,t)}},e.type.display_name)})))},r.state={selected:0},r}return Object(o.a)(n,[{key:"handleClickTab",value:function(e,t){e.preventDefault(),this.setState({selected:t})}},{key:"render",value:function(){var e=this,t=this.props.children,n=a.a.Children.map(t,(function(t,n){return e.state.selected===n&&a.a.cloneElement(t)}));return a.a.createElement("div",{id:"panel_container",className:"panel_container ".concat(this.props.className)},a.a.createElement("div",{onMouseDown:this.props.handleStartDrag,className:"panel_drag"}),this.renderTabs(),n)}}]),n}(r.Component),L=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"select_group"},a.a.createElement("select",{onChange:this.props.onChange,value:this.props.value,style:{backgroundImage:"url(images/icons/input_select_arrow.svg), url(".concat(this.props.icon,")")}},this.props.children),a.a.createElement("label",{className:"group_label"},this.props.placeholder))}}]),n}(r.Component);function N(e,t){for(var n=e,r=0;r<t-e.length;r++)n="0"+n;return n}var D=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleType=function(e){r.setState({register_type:parseInt(e.target.value,10)})},r.translateRegister=function(e){switch(r.state.register_type){default:case 0:return N((e>>>0).toString(16),2);case 1:return N((e>>>0).toString(10),3);case 2:return N((e>>>0).toString(8),3);case 3:return N((e>>>0).toString(2),8)}},r.state={register_type:0},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tabs;if(0===t.length)return a.a.createElement("div",null);var n=t[this.props.selectedtab].core.memory,r=0===n.length;return a.a.createElement("div",{id:"panel_memory",className:"panel panel_memory"},r&&a.a.createElement("span",{className:"panel_empty"},"Memory Empty"),!r&&a.a.createElement(L,{onChange:this.handleType,icon:"images/icons/input_type.svg",placeholder:"Display Type",defaultValue:"0"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Decimal"),a.a.createElement("option",{value:"2"},"Octal"),a.a.createElement("option",{value:"3"},"Binary")),!r&&n.map((function(t,n){var r=e.translateRegister(t);return a.a.createElement("span",{key:n},r," ")})))}}]),n}(r.Component);D.display_name="memory";var M=Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}}))(D),U=0,$=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.tabs[this.props.selectedtab];if(!e)return a.a.createElement("div",null);var t=e.console,n=0===t.length,r=e.runningStatus!==U;return a.a.createElement("div",{id:"panel_console",className:"panel panel_console"},n&&a.a.createElement("span",{className:"panel_empty"},"Console Empty"),!n&&t.map((function(e,t){return a.a.createElement("div",{key:t},e)})),this.props.show_input&&a.a.createElement("span",null,a.a.createElement("span",{className:"blinker"},"<<")," ",this.props.input),r&&a.a.createElement("div",{className:"running_console"},"Simulation still not completed..."))}}]),n}(r.Component);$.display_name="console";var Z=Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}}))($),P=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=0===this.props.core.log.length;return a.a.createElement("div",{id:"panel_log",className:"panel panel_log"},e&&a.a.createElement("span",{className:"panel_empty"},"Instruction Log Empty"),!e&&this.props.core.log.map((function(e,t){return a.a.createElement("div",{key:t},e)})))}}]),n}(r.Component);P.display_name="log";var V=Object(I.b)((function(e){return{core:e.tabs[e.selectedtab]}}))(P),H=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleClose=function(t){t.preventDefault(),e.props.setHelpVisible(!1)},e.handleStopClose=function(e){e.stopPropagation()},e}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{id:"help",onClick:this.handleClose,className:"settings_overlay overlay fader".concat(this.props.visible?" fader_shown":"")},a.a.createElement("div",{className:"settings_container",onClick:this.handleStopClose},a.a.createElement("button",{className:"floating_close",onClick:this.handleClose}),a.a.createElement("h2",null,a.a.createElement(T.b,{id:"help.title"})),a.a.createElement("div",{className:"overlay_contents"},a.a.createElement(T.b,{id:"help.data",options:{renderInnerHtml:!0}}),a.a.createElement("button",{className:"button",onClick:this.handleClose},"Close"))))}}]),n}(r.Component),K=Object(T.d)(Object(I.b)((function(e){return{visible:e.panel_visibility.help}}),(function(e,t){return{setHelpVisible:function(t){return e(F(t))}}}))(H)),X={core:[{affiliation:"Research Associate, American University in Cairo",pic:"donn.jpg",name:'Mohamed "Donn" Gaber',job:"Assembler / Simulator Developer",link:"https://donn.website/",desc:"Maintainer of the Cloud V platform on both https://cloudv.io and https://efabless.com. I consume an unhealthy amount of video games in my spare time."},{affiliation:"Student, American University in Cairo (formerly)",pic:"karimio.jpg",name:"Karim Abdel Hamid",job:"Primary Front-End/IDE Developer",link:"https://karimio.github.io/",desc:"I'm a game and web developer; love to write stories, play guitar, & paint."}],additional:[{affiliation:"Student, American University in Cairo (formerly)",pic:"ali_khaled.jpg",name:"Ali Khaled",job:"MIPS Assistance",link:"https://github.com/loshya",desc:"\u308a\u3085\u3046\u304c\u308f\u304c\u3066\u304d\u3092\u30af\u30e9\u30a6\uff01"},{affiliation:"Professor, American University in Cairo",pic:"shalan.jpg",name:"Dr. Mohamed Shalan",job:"Advisor",link:"https://github.com/shalan",desc:"Founder at Cloud V, Open Hardware Researcher and Advocate"}],translators:[]},W=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).handleClose=function(t){t.preventDefault(),e.props.setAboutVisible(!1)},e.handleStopClose=function(e){e.stopPropagation()},e.printdev=function(e){return e.map((function(e,t){return a.a.createElement("a",{key:t,href:e.link},a.a.createElement("img",{src:"images/about/".concat(e.pic),alt:e.name}),a.a.createElement("h4",null,e.name),a.a.createElement("span",null,e.job),a.a.createElement("span",null,e.affiliation),a.a.createElement("p",null,e.desc))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{id:"about",onClick:this.handleClose,className:"settings_overlay overlay fader".concat(this.props.visible?" fader_shown":"")},a.a.createElement("div",{className:"settings_container",onClick:this.handleStopClose},a.a.createElement("button",{className:"floating_close",onClick:this.handleClose}),a.a.createElement("h2",null,a.a.createElement(T.b,{id:"about.title"})),a.a.createElement("div",{className:"overlay_contents"},a.a.createElement("div",{className:"devlist"},a.a.createElement("h3",null,a.a.createElement(T.b,{id:"about.core_devs"})),this.printdev(X.core)),a.a.createElement("div",{className:"devlist"},a.a.createElement("h3",null,a.a.createElement(T.b,{id:"about.additional_devs"})),this.printdev(X.additional)),X.translators.length>0&&a.a.createElement("div",{className:"translatorlist"},a.a.createElement("h3",null,a.a.createElement(T.b,{id:"about.translators"})),X.translators.map((function(e,t){return a.a.createElement("a",{key:t,href:e.link},a.a.createElement("h4",null,e.name),a.a.createElement("span",null,e.lang))})))),a.a.createElement("button",{className:"button",onClick:this.handleClose},"Close")))}}]),n}(r.Component),Y=Object(T.d)(Object(I.b)((function(e){return{visible:e.panel_visibility.about}}),(function(e,t){return{setAboutVisible:function(t){return e(S(t))}}}))(W)),J=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleClick=function(e){r.setState({capturing:!0}),window.addEventListener("keydown",r.handleKey)},r.handleKey=function(e){if(r.state.capturing){e.stopPropagation(),e.preventDefault();var t=e.key.toLowerCase();if("control"===t||"shift"===t||"alt"===t)return!1;r.setState({shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey,key_name:t,capturing:!1}),window.removeEventListener("keydown",r.handleKey),r.props.save()}},r.testKey=function(e,t,n,a){return n===r.state.shift&&t===r.state.alt&&e===r.state.ctrl&&a===r.state.key_name},r.setKey=function(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};r.setState({ctrl:e,alt:t,shift:n,key_name:a},s)},r.getKey=function(){var e="_"+r.state.key_name;return r.state.shift&&(e="s"+e),r.state.alt&&(e="a"+e),r.state.ctrl&&(e="c"+e),e},r.setKeyStr=function(e){var t=e.indexOf("_"),n=e.substr(0,t),a=-1!==n.indexOf("s"),s=-1!==n.indexOf("a"),i=-1!==n.indexOf("c"),l=e.substr(t+1);r.setKey(i,s,a,l)},r.state={capturing:!1,combo:"a_110",shift:!0,alt:!0,ctrl:!0,key_name:"n"},r}return Object(o.a)(n,[{key:"render",value:function(){var e=!this.state.capturing;return a.a.createElement("div",{className:"key_bar".concat(this.state.capturing?" capturing":""),onClick:this.handleClick,tabIndex:0},!e&&a.a.createElement("span",null,"Capturing"),e&&this.state.ctrl&&a.a.createElement("span",null,"Ctrl"),e&&this.state.alt&&a.a.createElement("span",null,"Alt"),e&&this.state.shift&&a.a.createElement("span",null,"Shift"),e&&a.a.createElement("span",null,this.state.key_name))}}]),n}(r.Component),G=["theme_light","theme_dark","theme_dos","theme_apple2"],q=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;Object(l.a)(this,n),(r=t.call(this,e)).handleClose=function(e){e.preventDefault(),r.props.setSettingsVisible(!1)},r.handleStopClose=function(e){e.stopPropagation()},r.handleKey=function(e){if(r.props.canhandleinput){var t=e.key.toLowerCase();if("control"===t||"shift"===t||"alt"===t)return!1;for(var n=e.ctrlKey,a=e.altKey,s=e.shiftKey,i=!1,l=[r.comp_new.current,r.comp_load.current,r.comp_save.current,r.comp_assemble.current,r.comp_step.current,r.comp_sim.current],o=[r.props.fn_new,r.props.fn_load,r.props.fn_save,r.props.fn_ass,r.props.fn_step,r.props.fn_sim],u=0;u<l.length;++u)l[u].testKey(n,a,s,t)&&(o[u](),i=!0);i&&(e.preventDefault(),e.stopPropagation())}},r.setDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};r.comp_new.current.setKey(!1,!0,!1,"n",(function(){r.comp_load.current.setKey(!0,!1,!1,"o",(function(){r.comp_save.current.setKey(!0,!1,!1,"s",(function(){r.comp_assemble.current.setKey(!1,!0,!1,"f5",(function(){r.comp_sim.current.setKey(!1,!0,!1,"f7",(function(){r.comp_step.current.setKey(!1,!0,!1,"f6",(function(){r.setTheme("theme_light",e)}))}))}))}))}))}))},r.setDefaultsSave=function(){r.setDefaults(r.saveSettings)},r.saveSettings=function(){var e=new Date;e.setTime(e.getTime()+2592e6);var t="; expires="+e.toUTCString()+"; path=/";document.cookie="ojs_hotkey_new="+r.comp_new.current.getKey()+t,document.cookie="ojs_hotkey_load="+r.comp_load.current.getKey()+t,document.cookie="ojs_hotkey_save="+r.comp_save.current.getKey()+t,document.cookie="ojs_hotkey_ass="+r.comp_assemble.current.getKey()+t,document.cookie="ojs_hotkey_sim="+r.comp_sim.current.getKey()+t,document.cookie="ojs_hotkey_step="+r.comp_step.current.getKey()+t,document.cookie="ojs_theme="+r.state.theme+t},r.setTheme=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};G.includes(e)||(e=G[0]),G.forEach((function(t){document.getElementById(t).disabled=t!==e})),r.setState({theme:e},t)},r.handleISA=function(e){r.setState({default_isa:e.target.value})},r.handleTheme=function(e){r.setTheme(e.target.value,r.saveSettings)},r.acceptCookies=function(e){e.preventDefault(),r.setState({use_cookies:!0}),r.setDefaultsSave()},r.deleteAllCookies=function(){for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var n=e[t],a=n.indexOf("="),s=a>-1?n.substr(0,a):n;"ojs"===s.substr(0,3)&&(document.cookie=s+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT")}r.setState({use_cookies:!1}),r.setDefaults()},r.state={default_isa:"RISC-V",theme:"theme_light",use_cookies:!1},window.addEventListener("keydown",r.handleKey);for(var s=1;s<G.length;++s)document.getElementById(G[s]).disabled=!0;return r.comp_new=a.a.createRef(),r.comp_load=a.a.createRef(),r.comp_save=a.a.createRef(),r.comp_assemble=a.a.createRef(),r.comp_sim=a.a.createRef(),r.comp_step=a.a.createRef(),r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){for(var e=!1,t=document.cookie.split("; "),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);var a=r.indexOf("="),s=r.substr(0,a),i=r.substr(a+1);"ojs_hotkey_new"===s?(this.comp_new.current.setKeyStr(i),e=!0):"ojs_hotkey_load"===s?(this.comp_load.current.setKeyStr(i),e=!0):"ojs_hotkey_save"===s?(this.comp_save.current.setKeyStr(i),e=!0):"ojs_hotkey_ass"===s?(this.comp_assemble.current.setKeyStr(i),e=!0):"ojs_hotkey_sim"===s?(this.comp_sim.current.setKeyStr(i),e=!0):"ojs_hotkey_step"===s?(this.comp_step.current.setKeyStr(i),e=!0):"ojs_theme"===s&&(this.setTheme(i),e=!0)}e&&this.setState({use_cookies:!0})}},{key:"render",value:function(){return a.a.createElement("div",{id:"settings",onClick:this.handleClose,className:"settings_overlay overlay fader".concat(this.props.visible?" fader_shown":"")},a.a.createElement("div",{className:"settings_container",onClick:this.handleStopClose},a.a.createElement("button",{className:"floating_close",onClick:this.handleClose}),a.a.createElement("h2",null,"Settings"),!this.state.use_cookies&&a.a.createElement("div",{className:"cookie_screen"},a.a.createElement("h3",null,"Cookies"),a.a.createElement("p",null,"In order to set your own settings, you need to enable cookies. Cookies are the way websites store data for individual users. We store your cookies directly in the browser, and only store the options stored here."),a.a.createElement("button",{onClick:this.acceptCookies,className:"button"},"Accept Cookies, Show Settings"),a.a.createElement("button",{onClick:this.handleClose,className:"button subbutton"},"Close Window")),a.a.createElement("div",{style:{display:this.state.use_cookies?"block":"none",position:"relative"}},a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"General Settings"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement(L,{onChange:this.handleTheme,icon:"images/icons/input_type.svg",placeholder:"Theme",value:this.state.theme},a.a.createElement("option",{value:"theme_light"},"Light"),a.a.createElement("option",{value:"theme_dark"},"Dark"),a.a.createElement("option",{value:"theme_dos"},"DOS"),a.a.createElement("option",{value:"theme_apple2"},"Apple ]["))))),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},"Hotkeys"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"New Tab"),a.a.createElement("td",null,a.a.createElement(J,{ref:this.comp_new,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Save Tab"),a.a.createElement("td",null,a.a.createElement(J,{ref:this.comp_save,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Load"),a.a.createElement("td",null,a.a.createElement(J,{ref:this.comp_load,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Assemble"),a.a.createElement("td",null,a.a.createElement(J,{ref:this.comp_assemble,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Step-By-Step"),a.a.createElement("td",null,a.a.createElement(J,{ref:this.comp_step,save:this.saveSettings}))),a.a.createElement("tr",null,a.a.createElement("td",null,"Simulate"),a.a.createElement("td",null,a.a.createElement(J,{ref:this.comp_sim,save:this.saveSettings}))))),a.a.createElement("button",{className:"button",onClick:this.handleClose},"Accept Changes"),a.a.createElement("button",{className:"button subbutton",onClick:this.setDefaultsSave},"Restore Defaults"),a.a.createElement("button",{className:"button subbutton",onClick:this.deleteAllCookies},"Delete Cookies"))))}}]),n}(r.Component),Q=Object(T.d)(Object(I.b)((function(e){return{visible:e.panel_visibility.settings}}),(function(e,t){return{setSettingsVisible:function(t){return e(E(t))}}}))(q)),ee=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"input_group"},a.a.createElement("input",{onChange:this.props.onChange,value:this.props.value,style:{backgroundImage:"url(".concat(this.props.icon,")")},type:this.props.type,placeholder:this.props.placeholder}),a.a.createElement("label",{className:"group_label"},this.props.placeholder))}}]),n}(r.Component),te=function(){function e(){Object(l.a)(this,e),this.continueInputString=function(e,t){for(var n=e.virtualOSArgumentVectorStart,r=e.registerFile.read(n),a=[],s=0;s<t.length;++s)a.push(t.charCodeAt(s));e.memset(r,a)},this.continueInputInt=function(e,t){var n=e.virtualOSArgumentVectorStart;e.registerFile.write(n,t)}}return Object(o.a)(e,[{key:"ecall",value:function(e){var t=e.registerFile.read(e.virtualOSServiceRegister),n=e.virtualOSArgumentVectorStart;switch(t){case 1:var r=e.registerFile.read(n);this.outputInt(r);break;case 4:for(var a=e.registerFile.read(n),s=[],i=null;0!==(i=e.memcpy(a,1)[0]);)s.push(i),a+=1;var l=s.map((function(e){return String.fromCharCode(e)})).join("");return this.outputString(l),null;case 5:return this.inputInt(),"WAIT";case 8:return this.inputString(),"WAIT";case 10:return this.handleHalt(),"HALT";default:return"UNHANDLED"}return null}}]),e}(),ne=function e(t){for(var n in Object(l.a)(this,e),t)this[n]=t[n],this[t[n]]=n},re=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"signExt",value:function(e,t){var n=e;return 0!==(n&1<<t-1)&&(n=-1>>>t<<t|e),n}},{key:"rangeCheck",value:function(e,t){if(t>=32)return null;if(Math.abs(e).toString(2).length>t)return!1;var n=(1<<t-1)-1;return-(1<<t-1)<=(e=this.signExt(e,t))>>0&&e>>0<=n}},{key:"catBytes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.length>4)return null;t&&e.reverse();for(var n=0,r=0;r<e.length;r++)n|=e[r]<<8*r;return n}},{key:"pad",value:function(e,t,n){for(var r=e.toString(n);t>r.length;)r="0"+r;return r}},{key:"hex",value:function(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16).toUpperCase();1===r.length&&(r="0"+r),t+=r+" "}return t}}]),e}(),ae=new ne({immediate:0,register:1,condition:2,offset:3,special:4,fpImmediate:5}),se=new ne({little:0,big:1,bi:2}),ie=new ne({directive:0,comment:1,label:2,stringMarker:3,charMarker:4,register:5,string:6,char:7,numberic:8}),le=new ne({text:0,data:1,string:2,cString:3,_8bit:4,_16bit:5,_32bit:6,_64bit:7,fixedPoint:8,floatingPoint:9,custom:10}),oe=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(l.a)(this,e),this.field=t,this.start=n,this.bits=r,this.constant=a,this.signed=s}return Object(o.a)(e,[{key:"limited",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.totalBits=e,this.limitStart=t,this.limitEnd=n,this}},{key:"parameterized",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.parameter=e,this.parameterDefaultValue=n,this.parameterType=t,this}},{key:"end",get:function(){return this.start+this.bits-1}}]),e}(),ue=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(l.a)(this,e),this.ranges=t,this.regex=n,this.disassembly=r,this.processSpecialParameter=a,this.decodeSpecialParameter=s},ce=function(){function e(t,n,r,a,s){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];for(var u in Object(l.a)(this,e),this.computedBits=null,this.computedMask=null,this.computedTemplate=null,this.mnemonic=t,this.format=n,this.constants=[],r)this.constants[r[u]]=a[u];this.executor=s,this.signatoryOverride=i,this.pseudoInstructionFor=o}return Object(o.a)(e,[{key:"pad",value:function(e,t){for(var n=e,r=0;r<t-e.length;r++)n="0"+n;return n}},{key:"match",value:function(e){for(var t=e>>>0,n=this.mask.split(""),r=this.bits-1;r>=0;r--){var a=1&t;if(t>>=1,"X"!==n[r]&&parseInt(n[r],10)!==a)return!1}return!0}},{key:"bits",get:function(){if(null!==this.computedBits)return this.computedBits;var e=0;for(var t in this.format.ranges)e+=this.format.ranges[t].bits;return this.computedBits=e,this.computedBits}},{key:"bytes",get:function(){return Math.ceil(this.bits/8)}},{key:"mask",get:function(){if(null!==this.computedMask)return this.computedMask;for(var e="",t=0;t<this.bits;t+=1)e+="X";for(var n in this.format.ranges){var r=this.format.ranges[n],a=this.constants[r.field];if(null===a&&(a=r.constant),null!=a){var s=e.substr(0,this.bits-r.end-1),i=re.pad(a,r.bits,2),l=0===r.start?"":e.substr(-r.start);e=s+i+l}}return this.computedMask=e,this.computedMask}},{key:"template",get:function(){if(null!=this.computedTemplate)return this.computedTemplate;var e=0;for(var t in this.format.ranges){var n=this.format.ranges[t],r=this.constants[n.field];null===r&&(r=n.constant),null!=r&&(e|=r<<n.start)}return this.computedTemplate=e,e}}]),e}(),pe=function(){function e(t,n,r,a,s,i,o,u,c){Object(l.a)(this,e),this.bits=t,this.formats=n,this.instructions=r,r.sort((function(e,t){return e.bytes-t.bytes})),this.pseudoInstructions=a,this.abiNames=s,this.keywords=i,this.directives=o,this.incrementOnFetch=u,this.exampleCode=c}return Object(o.a)(e,[{key:"pseudoMnemonicSearch",value:function(e){return-1}},{key:"mnemonicSearch",value:function(e){for(var t=0;t<this.instructions.length;t++)if(this.instructions[t].mnemonic===e)return t;return-1}},{key:"instructionsPrefixing",value:function(e){var t=[];for(var n in this.instructions){var r=this.instructions[n];if(e.toUpperCase().hasPrefix(r.mnemonic)){var a=r.format.regex.exec(e);a&&a[1].toUpperCase()===r.mnemonic&&t.push(r)}}return t}},{key:"disassemble",value:function(e,t){var n=e.format.disassembly;n=n.replace("@mnem",e.mnemonic);for(var r=0;r<e.format.ranges.length;r++){var a=e.format.ranges[r],s=a.parameter;null!=s&&(n=n.replace("@arg"+a.parameter,a.parameterType===ae.register?this.abiNames[t[s]]:t[s].toString()))}return n}}]),e}();String.prototype.interpretedBytes=function(){for(var e=this.split(" "),t=[],n=0;n<e.length;n++){var r=parseInt(e[n],16);isNaN(r)||t.push(r)}return t},String.prototype.hasPrefix=function(e){return this.substr(0,e.length)===e};var de=new ne({instruction:0,data:1,directive:2,noise:3}),me=function(){function e(t,n){Object(l.a)(this,e),this.addressThisPass=null,this.sensitive=!1,this.machineCode=[],this.raw=t,this.number=n,this.kind=de.noise,this.sensitivityList=[],this.possibleInstructions=[]}return Object(o.a)(e,[{key:"initialProcess",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.keywordRegexes[ie.comment],a=r.exec(this.raw)[1],s=e.keywordRegexes[ie.label],i=s.exec(a);if(this.label=i[1],this.processed=i[2]||"",null!==/^s*$/.exec(this.processed))return n;if(null!=e.keywordRegexes[ie.directive]){var l=RegExp(e.keywordRegexes[ie.directive]).exec(this.processed);null!==l&&(this.directive=e.directives[l[1]],this.directiveData=l[2])}if(n){if(void 0!==this.directive){switch(this.directive){case le.data:return this.kind=de.directive,!1;case le.text:this.kind=de.directive;break;default:this.invalidReason="Unsupported directive."}return!0}if(this.kind=de.instruction,e.instructionSet.instructions.forEach((function(e){var n=e.format.regex.exec(t.processed);return null!==n&&n[1].toUpperCase()===e.mnemonic&&t.possibleInstructions.push([e,n.slice(2),[],null]),null!==n})),0===this.possibleInstructions.length)return this.invalidReason="Could not find any matching instructions.",!0;var o=this.possibleInstructions[0][0].bytes;return(this.machineCode=[]).length=o,this.machineCode.fill(0),!0}var u=null,c=0;if(void 0!==this.directive)switch(this.kind=de.data,this.directive){case le.data:this.kind=de.directive;break;case le.text:return this.kind=de.directive,!0;case le._32bit:u=u||4;case le._16bit:u=u||2;case le._8bit:u=u||1;var p=this.directiveData.split(/\s*,\s*/);(this.machineCode=[]).length=p.length*u,this.machineCode.fill(0),this.kind=de.data;break;case le.cString:c=1;case le.string:null===e.keywordRegexes[ie.string]&&(this.invalidReason="This instruction set does not define a string keyword.");var d=e.keywordRegexes[ie.string].exec(this.directiveData);if(null===d)this.invalidReason='Invalid string "'.concat(this.directiveData,'".');else{for(var m=RegExp(e.generalCharacters,"g"),g=[],h=null;h=m.exec(d[1]);)g.push(h);for(var f in(this.machineCode=[]).length=g.length+c,g){var b=String(g[f]),v=b.charCodeAt(0);b.length>2&&(v=ge.escapedCharacters[b[1]]),this.machineCode[f]=v}1===c&&(this.machineCode[this.machineCode.length-1]=0)}this.kind=de.data;break;default:this.invalidReason="Unrecognized directive."}else{var y=!1;e.instructionSet.instructions.forEach((function(e){var n=e.format.regex.exec(t.processed);null!==n&&n[1].toUpperCase()===e.mnemonic&&(y=!0)})),this.invalidReason=y?"Matched instruction in data section.":"Unknown input in the data section."}return!1}},{key:"assembleText",value:function(e,t,n){var r=!1;e:for(var a in this.possibleInstructions){var s=this.possibleInstructions[a],i=s[0],l=s[1],o=i.template;for(var u in i.format.ranges){var c=i.format.ranges[u];if(void 0!==c.parameter){var p=c.totalBits,d=p||c.bits,m=null;if(null!==(m=c.parameterType==ae.special?i.format.processSpecialParameter(l[c.parameter],ae.special,d,n,e):e.process(l[c.parameter],c.parameterType,d,n,i.bytes)).errorMessage){s[3]=m.errorMessage;continue e}if(null!==m.context&&null===m.value){m.context.sensitivityList.push(this),this.sensitive=!0;break e}var g=m.value,h=c.limitStart,f=c.limitEnd;void 0!==p&&void 0!==h&&void 0!==f&&(g>>=h,g&=(1<<f-h+1)-1),o|=(g&(1<<d)-1)<<c.start}}for(var b=0;b<i.bytes;b+=1)s[2].push(255&o),o>>>=8;r=!0}if(r){var v=this.possibleInstructions.filter((function(e){return null===e[3]}))[0];this.machineCode=v[2]}var y=null;return!(r||this.sensitive)&&(y=this.possibleInstructions[this.possibleInstructions.length-1][3]),y}},{key:"assembleData",value:function(e,t,n){var r=null,a=null;switch(this.directive){case le._32bit:a=a||4;case le._16bit:a=a||2;case le._8bit:a=a||1;for(var s=this.directiveData.split(/\s*,\s*/),i=0;i<s.length;i+=1){var l=s[i],o=a<<3,u=e.process(l,ae.immediate,o,n,0);if(null!==u.errorMessage){r=u.errorMessage;break}if(null!==u.context&&null===u.value){u.context.sensitivityList.push(this),this.sensitive=!0;break}for(var c=u.value,p=0;p<a;p+=1){var d=a*i;this.machineCode[p+d]=255&c,c>>>=8}}break;case le.cString:case le.string:break;default:this.invalidReason="Unrecognized directive."}return r}},{key:"assemble",value:function(e,t,n){this.sensitive=!1;var r=[null,!1];switch(this.kind){case de.instruction:r[0]=this.assembleText(e,t,n);break;case de.data:r[0]=this.assembleData(e,t,n)}var a=e.linesByLabel[this.label];if(void 0!==a&&(a[1]=n),null===r[0])for(var s in this.sensitivityList){var i=this.sensitivityList[s];if(null!==i.addressThisPass){var l=i.machineCode.length,o=i.assemble(e,t,i.addressThisPass);if(i.sensitive);else{if(o[1]){r[1]=!0;break}if(i.machineCode.length!==l){r[1]=!0;break}}}}else this.invalidReason=r[0];return r}}],[{key:"arrayFromFile",value:function(t){return t.split("\n").map((function(t,n){return new e(t,n)}))}}]),e}(),ge=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Object(l.a)(this,e),this.linesByLabel=[],this.incrementOnFetch=t.incrementOnFetch,this.keywordRegexes=[],this.memoryMap=r,t.keywordRegexes)this.keywordRegexes=t.keywordRegexes;else if(t.keywords){var a=t.keywords;if(this.keywordRegexes=[],a[ie.directive]){var s=e.options(t.keywords[ie.directive]);s&&(this.keywordRegexes[ie.directive]=RegExp(s+"([^\\s]+)\\s*(.+)*"))}if(a[ie.comment]){var i=e.options(a[ie.comment]);i&&(this.keywordRegexes[ie.comment]=RegExp("^(.*?)("+i+".*)?$"))}if(a[ie.label]){var o=e.options(a[ie.label]);o&&(this.keywordRegexes[ie.label]=RegExp("^(?:([A-Za-z_][A-Za-z0-9_]*)"+o+")?\\s*(.*)?$"))}if(a[ie.register]){var u=e.options(a[ie.register]);u&&(this.keywordRegexes[ie.register]=RegExp(u+"([0-9]+)"))}if(this.keywordRegexes[ie.numeric]=RegExp("(-?(?:0(["+e.radixList+"]))?[A-F0-9]+)"),a[ie.charMarker]){var c=e.options(a[ie.charMarker]);if(c){var p=c.length>1?"":"\\"+c;this.generalCharacters="(?:(?:\\\\[\\\\"+e.escapedCharacterList+p+"])|(?:[\\x20-\\x5b\\x5d-\\x7e]))",this.keywordRegexes[ie.char]=RegExp(c+"("+this.generalCharacters+")"+c)}}else this.generalCharacters="(?:(?:\\\\[\\\\"+e.escapedCharacterList+"])|(?:[\\x20-\\x5b\\x5d-\\x7e]))";if(a[ie.stringMarker]){var d=e.options(a[ie.stringMarker]);d&&(this.keywordRegexes[ie.string]=RegExp(d+"("+this.generalCharacters+"*)"+d))}}else console.log("INSTRUCTION SET WARNING: This instruction set doesn't define any keywords.");this.directives=t.directives,this.endianness=n||t.endianness,this.instructionSet=t}return Object(o.a)(e,[{key:"process",value:function(t,n,r,a,s){var i={errorMessage:null,value:null,context:null};switch(n){case ae.register:var l=this.instructionSet.abiNames.indexOf(t);if(-1!==l)return i.value=l,i;var o=null;if(this.keywordRegexes[ie.register]){var u=this.keywordRegexes[ie.register].exec(t);null!==u&&(o=u[1])}return null===o||0!==((o=parseInt(o,10))&-1<<r)?(i.errorMessage="args.registerDoesNotExist(".concat(t,")"),i):(i.value=o,i);case ae.offset:case ae.immediate:var c=null,p=this.linesByLabel[t];if(void 0!==p){if(i.context=p[0],null===p[1])return i;c=p[1]}if(null===c&&this.keywordRegexes[ie.char]){var d=RegExp(this.keywordRegexes[ie.char]).exec(t);if(null!==d&&void 0!==d[1]&&(c=d[1].charCodeAt(0))>255)return i.errorMessage="Non-ascii character "+d[1]+" unsupported.",i}if(null===c&&void 0!==this.keywordRegexes[ie.numeric]){var m=RegExp(this.keywordRegexes[ie.numeric]).exec(t);if(null!==m){var g=e.radixes[m[2]]||10,h=m[1];c=parseInt(h,g)}}return null!==c&&n===ae.offset&&(c-=a,this.incrementOnFetch&&(c-=s)),null===c||isNaN(c)?(i.errorMessage="args.valueUnrecognized(".concat(t,")"),i):!1===re.rangeCheck(c,r)?(i.errorMessage="args.outOfRange(".concat(t,")"),i):(i.value=c,i);default:return i.errorMessage="Internal Oak Error: Unknown parameter '".concat(ae[n],"'."),i}}},{key:"assemble",value:function(e,t){e.map((function(e){return e.addressThisPass=null}));var n=[],r=!0,a=0;for(var s in e){var i=e[s];switch(t){case 0:r=i.initialProcess(this,r),void 0!==i.invalidReason&&n.push(i),void 0!==i.label&&(this.linesByLabel[i.label]=[i,null]);break;default:i.addressThisPass=a;var l=i.assemble(this,e,a);if(null!==l[0]&&n.push(i),l[1])return null;a+=i.machineCode.length}}return n}}],[{key:"options",value:function(e){if(0===e.length)return null;for(var t="",n=0;n<e.length;n++){var r=e[n];if("\\"===r)return console.log("INSTRUCTION SET WARNING: '\\' used as keyword. This behavior is undefined."),null;""===t?t="(?:":t+="|",t+=r}return t+")"}}]),e}();ge.radixes={b:2,o:8,d:10,x:16},ge.radixList=Object.keys(ge.radixes).join(""),ge.escapedCharacters={0:0,t:9,n:10,r:13,"'":47,'"':42},ge.escapedCharacterList=Object.keys(ge.escapedCharacters).join("");var he=function(){function e(){Object(l.a)(this,e),this.ISAs={}}return Object(o.a)(e,[{key:"getCoreList",value:function(){return Object.keys(this.ISAs)}},{key:"getCore",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.ISAs[e];if(void 0===a)throw"ISA '".concat(e,"' not found.");for(var s in null===r&&(r=a.options),r)if(void 0===a.options[s])throw"Option '".concat(s,"' for ISA ").concat(e," is unsupported.");var i=a.generator(r);return new a.core(t,n,i)}}]),e}(),fe=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,[{key:"memcpy",value:function(e,t){if(e+t>>>0>this.memorySize)return null;for(var n=[],r=0;r<t;r++)n.push(this.memory[e+r]);return n}},{key:"memset",value:function(e,t){if(e<0)return!1;if(e+t.length>this.memorySize)return!1;for(var n=0;n<t.length;n++)this.memory[e+n]=t[n];return!0}},{key:"decode",value:function(){var e=this.instructionSet.instructions;this.decoded=null,this.arguments=[];for(var t=0;t<e.length;t++)if(e[t].match(this.fetched)){this.decoded=e[t];break}if(null===this.decoded)return null;var n=this.decoded.format.ranges;for(var r in n){var a=n[r];if(null!=a.parameter){var s=a.limitStart,i=(this.fetched>>>a.start&(1<<a.bits)-1)<<s;a.parameterType===ae.special&&(i=this.decoded.format.decodeSpecialParameter(i,this.pc)),this.arguments[a.parameter]=this.arguments[a.parameter]||0,this.arguments[a.parameter]=this.arguments[a.parameter]|i,this.decoded.format.ranges[r].signed&&a.parameterType!==ae.register&&(this.arguments[a.parameter]=re.signExt(this.arguments[a.parameter],a.totalBits?a.totalBits:a.bits))}}return this.instructionSet.disassemble(this.decoded,this.arguments)}},{key:"execute",value:function(){return this.decoded.executor(this)}}]),e}();fe.factory=new he;var be={VirtualOS:te,Endianness:se,Assembler:ge,Line:me,Core:fe},ve=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).handleFileName=function(t){e.props.setProjectSettings(t.target.value,e.props.project_settings.memory_size,e.props.project_settings.isa)},e.handleISA=function(t){e.props.setProjectSettings(e.props.project_settings.file_name,e.props.project_settings.memory_size,t.target.value)},e.handleMemorySize=function(t){(""===t.target.value||/^[0-9\b]+$/.test(t.target.value))&&e.props.setProjectSettings(e.props.project_settings.file_name,t.target.value,e.props.project_settings.isa)},e.handleSubmit=function(t){t.preventDefault(),e.props.submitChanges()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=be.Core.factory.getCoreList();return a.a.createElement("div",{id:"panel_settings",className:"panel panel_settings"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement(ee,{onChange:this.handleFileName,value:this.props.project_settings.file_name,icon:"images/icons/input_name.svg",placeholder:"File Name",id:"filename"}),a.a.createElement(L,{onChange:this.handleISA,value:this.props.project_settings.isa,icon:"images/icons/input_code.svg",placeholder:"Instruction Set"},e.map((function(e,t){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement(ee,{onChange:this.handleMemorySize,value:this.props.project_settings.memory_size,icon:"images/icons/input_memory.svg",placeholder:"Memory Size (Bytes)",type:"number"}),a.a.createElement("input",{className:"button",value:"Accept Changes",type:"submit"})))}}]),n}(r.Component);ve.display_name="settings";var ye=Object(T.d)(Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab,project_settings:e.project_settings}}),(function(e,t){return{setProjectSettings:function(t,n,r){return e(C(t,n,r))}}}))(ve)),we=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).calculateOutput=function(e,t,n){var r,a=e;switch(t){case 0:a=parseInt(a,16);break;default:case 1:case 2:a=parseInt(a,10);break;case 3:a=parseInt(a,2);break;case 4:a=a}if("NaN"===a.toString())return"";switch(n){case 0:r="0x"+N((a>>>0).toString(16),8);break;case 1:r=(a>>>0).toString(10);break;default:case 2:(r=a.toString(10))>2147483648&&(r-=4294967296);break;case 3:r="0b"+N((a>>>0).toString(2),32);break;case 4:r=a}return r},r.onChangeInput=function(e){var t=e.target.value,n=r.state.input_type,a=r.state.output_type,s=r.calculateOutput(t,n,a);r.setState({input:t,has_value:""!==t,output:s})},r.onChangeInputType=function(e){var t=r.state.input,n=parseInt(e.target.value,10),a=r.state.output_type,s=r.calculateOutput(t,n,a);r.setState({input:t,input_type:n,has_value:""!==t,output:s})},r.onChangeOutputType=function(e){var t=r.state.input,n=r.state.input_type,a=parseInt(e.target.value,10),s=r.calculateOutput(t,n,a);r.setState({input:t,output_type:a,has_value:""!==t,output:s})},r.state={input:0,input_type:0,output_type:0,output:"",has_value:!1},r}return Object(o.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{id:"panel_conversion",className:"panel panel_conversion"},a.a.createElement(ee,{onChange:this.onChangeInput,icon:"images/icons/input_in.svg",placeholder:"Input",type:"text"}),a.a.createElement(L,{onChange:this.onChangeInputType,icon:"images/icons/input_type.svg",placeholder:"Input Type"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Integer"),a.a.createElement("option",{value:"3"},"Binary")),a.a.createElement("hr",null),a.a.createElement(L,{onChange:this.onChangeOutputType,icon:"images/icons/input_type.svg",placeholder:"Output Type"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Unsigned Integer"),a.a.createElement("option",{value:"2"},"Signed Integer"),a.a.createElement("option",{value:"3"},"Binary")),a.a.createElement("span",{className:"conversion_output"},""!==this.state.output?this.state.output:"<Output>"))}}]),n}(r.Component);we.display_name="conversion";var _e=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleType=function(e){r.setState({register_type:parseInt(e.target.value,10)})},r.translateRegister=function(e){switch(r.state.register_type){case 0:return"0x"+N((e>>>0).toString(16),8);case 1:return(e>>>0).toString(10);default:case 2:var t=e.toString(10);return t>2147483648&&(t-=4294967296),t;case 3:return"0b"+N((e>>>0).toString(2),32);case 4:return e}},r.getChangedRegisterClass=function(e){switch(e){default:case 0:return"reg_normal";case 1:return"reg_assigned";case 2:return"reg_new"}},r.state={register_type:0},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tabs[this.props.selectedtab];if(!t||!t.core)return a.a.createElement("div",null);var n=t.core,r=n.registerFile.physicalFile,s=t.register_changed,i=n.registerFile.abiNames;return a.a.createElement("div",{id:"panel_registers",className:"panel panel_registers"},a.a.createElement(L,{onChange:this.handleType,icon:"images/icons/input_type.svg",placeholder:"Display Type",defaultValue:"0"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Unsigned Integer"),a.a.createElement("option",{value:"2"},"Signed Integer"),a.a.createElement("option",{value:"3"},"Binary"),a.a.createElement("option",{value:"4"},"Float")),a.a.createElement("table",{cellSpacing:"0",cellPadding:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Reg"),a.a.createElement("th",null,"Value"))),a.a.createElement("tbody",null,r.map((function(t,n){var r=e.translateRegister(t);return a.a.createElement("tr",{key:n,className:e.getChangedRegisterClass(s[n])},a.a.createElement("td",null,i[n]),a.a.createElement("td",{"data-info":t},r))})))))}}]),n}(r.Component);_e.display_name="registers";var Ee=Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}}))(_e),Fe=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleType=function(e){r.setState({register_type:parseInt(e.target.value,10)})},r.translateRegister=function(e){switch(r.state.register_type){default:case 0:return N((e>>>0).toString(16),2);case 1:return N((e>>>0).toString(10),3);case 2:return N((e>>>0).toString(8),3);case 3:return N((e>>>0).toString(2),8)}},r.state={register_type:0},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tabs;if(0===t.length)return a.a.createElement("div",null);var n=t[this.props.selectedtab].machine_code,r=0===n.length;return a.a.createElement("div",{id:"panel_machine_code",className:"panel panel_machine_code"},r&&a.a.createElement("span",{className:"panel_empty"},"Machine Code Empty"),!r&&a.a.createElement(L,{onChange:this.handleType,icon:"images/icons/input_type.svg",placeholder:"Display Type",defaultValue:"0"},a.a.createElement("option",{value:"0"},"Hex"),a.a.createElement("option",{value:"1"},"Decimal"),a.a.createElement("option",{value:"2"},"Octal"),a.a.createElement("option",{value:"3"},"Binary")),!r&&n.map((function(t,n){var r=e.translateRegister(t);return a.a.createElement("span",{key:n},r," ")})))}}]),n}(r.Component);Fe.display_name="machine code";var Se=Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab}}))(Fe),ke=n(1),Ae=n.n(ke);var Ce=function(){function e(t,n){Object(l.a)(this,e),this.physicalFile=[],this.modifiedRegisters=[];for(var r=0;r<32;r++)this.physicalFile.push(0),this.modifiedRegisters.push(!1);this.memorySize=t,this.physicalFile[2]=t,this.abiNames=n}return Object(o.a)(e,[{key:"print",value:function(){console.log("Registers\n------");for(var e=0;e<32;e++)console.log("x"+e.toString(),this.abiNames[e],this.physicalFile[e].toString(),(this.physicalFile[e]>>>0).toString(16).toUpperCase());console.log("------")}},{key:"read",value:function(e){return 0===e?0:this.physicalFile[e]}},{key:"write",value:function(e,t){this.physicalFile[e]=t>>>0&4294967295,this.modifiedRegisters[e]=!0}},{key:"getRegisterCount",value:function(){return 32}},{key:"getModifiedRegisters",value:function(){for(var e=this.modifiedRegisters.slice(),t=0;t<this.getRegisterCount();t++)this.modifiedRegisters[t]=!1;return e}},{key:"reset",value:function(){for(var e=0;e<32;e++)this.physicalFile[e]=0,this.modifiedRegisters[e]=!1;this.physicalFile[2]=this.memorySize}}]),e}(),Ie=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e,r,a){var s;Object(l.a)(this,n),(s=t.call(this)).virtualOSServiceRegister=10,s.virtualOSArgumentVectorStart=11,s.virtualOSArgumentVectorEnd=17,s.pc=0,s.memorySize=e,s.virtualOS=r,s.instructionSet=a,s.registerFile=new Ce(e,a.abiNames),s.memory=new Array(e);for(var i=0;i<e;i++)s.memory[i]=0;return s}return Object(o.a)(n,[{key:"reset",value:function(){this.pc=0,this.memory=[];for(var e=0;e<this.memorySize;e++)this.memory[e]=0;this.registerFile.reset()}},{key:"fetch",value:function(){var e=this.memcpy(this.pc>>>0,4);return null===e?"Attempting to fetch from illegal memory address @".concat(this.pc):(this.fetched=re.catBytes(e),null)}}]),n}(fe);fe.factory.ISAs.RISCV={generator:function(e){var t=e||[],n=[],r=[];n.push(new ue([new oe("funct7",25,7),new oe("rs2",20,5).parameterized(2,ae.register),new oe("rs1",15,5).parameterized(1,ae.register),new oe("funct3",12,3),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var a=n[n.length-1];r.push(new ce("ADD",a,["opcode","funct3","funct7"],[51,0,0],(function(e){return e.registerFile.write(e.arguments[0],Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.add(Ae.a.BigInt(e.registerFile.read(e.arguments[1])),Ae.a.BigInt(e.registerFile.read(e.arguments[2]))),Ae.a.BigInt("0xFFFFFFFF")))),e.pc+=4,null}))),r.push(new ce("SUB",a,["opcode","funct3","funct7"],[51,0,32],(function(e){return e.registerFile.write(e.arguments[0],Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.subtract(Ae.a.BigInt(e.registerFile.read(e.arguments[1])),Ae.a.BigInt(e.registerFile.read(e.arguments[2]))),Ae.a.BigInt("0xFFFFFFFF")))),e.pc+=4,null}))),r.push(new ce("SLL",a,["opcode","funct3","funct7"],[51,1,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.registerFile.read(e.arguments[2])),e.pc+=4,null}))),r.push(new ce("SLT",a,["opcode","funct3","funct7"],[51,2,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.registerFile.read(e.arguments[2])?1:0),e.pc+=4,null}))),r.push(new ce("SLTU",a,["opcode","funct3","funct7"],[51,3,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0<e.registerFile.read(e.arguments[2])>>>0?1:0),e.pc+=4,null}))),r.push(new ce("XOR",a,["opcode","funct3","funct7"],[51,4,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])^e.registerFile.read(e.arguments[2])),e.pc+=4,null}))),r.push(new ce("SRL",a,["opcode","funct3","funct7"],[51,5,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.registerFile.read(e.arguments[2])),e.pc+=4,null}))),r.push(new ce("SRA",a,["opcode","funct3","funct7"],[51,5,32],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.registerFile.read(e.arguments[2])),e.pc+=4,null}))),r.push(new ce("OR",a,["opcode","funct3","funct7"],[51,6,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])|e.registerFile.read(e.arguments[2])),e.pc+=4,null}))),r.push(new ce("AND",a,["opcode","funct3","funct7"],[51,7,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])&e.registerFile.read(e.arguments[2])),e.pc+=4,null}))),t.includes("M")&&(r.push(new ce("MUL",a,["opcode","funct3","funct7"],[51,0,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>0),r=Ae.a.multiply(t,n),a=Ae.a.toNumber(Ae.a.bitwiseAnd(r,Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("MULH",a,["opcode","funct3","funct7"],[51,1,1],(function(e){console.log();var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>0),r=Ae.a.multiply(t,n),a=Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.signedRightShift(r,Ae.a.BigInt("32")),Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("MULHU",a,["opcode","funct3","funct7"],[51,2,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>>0),r=Ae.a.multiply(t,n),a=Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.signedRightShift(r,Ae.a.BigInt("32")),Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("MULHSU",a,["opcode","funct3","funct7"],[51,3,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>>0),r=Ae.a.multiply(t,n),a=Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.signedRightShift(r,Ae.a.BigInt("32")),Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("DIV",a,["opcode","funct3","funct7"],[51,4,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>0),r=null;r=Ae.a.equal(n,Ae.a.BigInt("0"))?Ae.a.BigInt("-1"):Ae.a.equal(Ae.a.bitwiseAnd(t,Ae.a.BigInt("0xFFFFFFFF")),Ae.a.BigInt("0x80000000"))&&Ae.a.equal(n,Ae.a.BigInt("-1"))?Ae.a.BigInt("0x80000000"):Ae.a.divide(t,n);var a=Ae.a.toNumber(Ae.a.bitwiseAnd(r,Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("DIVU",a,["opcode","funct3","funct7"],[51,5,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>>0),r=null;r=Ae.a.equal(n,Ae.a.BigInt("0"))?Ae.a.BigInt("-1"):Ae.a.divide(t,n);var a=Ae.a.toNumber(Ae.a.bitwiseAnd(r,Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("REM",a,["opcode","funct3","funct7"],[51,6,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>0),r=null;r=Ae.a.equal(n,Ae.a.BigInt("0"))?t:Ae.a.equal(Ae.a.bitwiseAnd(t,Ae.a.BigInt("0xFFFFFFFF")),Ae.a.BigInt("0x80000000"))&&Ae.a.equal(n,Ae.a.BigInt("-1"))?Ae.a.BigInt("0"):Ae.a.remainder(t,n);var a=Ae.a.toNumber(Ae.a.bitwiseAnd(r,Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null}))),r.push(new ce("REMU",a,["opcode","funct3","funct7"],[51,7,1],(function(e){var t=Ae.a.BigInt(e.registerFile.read(e.arguments[1])>>>0),n=Ae.a.BigInt(e.registerFile.read(e.arguments[2])>>>0),r=null;r=Ae.a.equal(n,Ae.a.BigInt("0"))?t:Ae.a.remainder(t,n);var a=Ae.a.toNumber(Ae.a.bitwiseAnd(r,Ae.a.BigInt("0xFFFFFFFF")));return e.registerFile.write(e.arguments[0],a),e.pc+=4,null})))),n.push(new ue([new oe("imm",20,12,null,!0).parameterized(2,ae.immediate),new oe("rs1",15,5).parameterized(1,ae.register),new oe("funct3",12,3),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+),\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var s=n[n.length-1];r.push(new ce("JALR",s,["opcode","funct3"],[103,0],(function(e){return e.registerFile.write(e.arguments[0],e.pc+4),e.pc=e.registerFile.read(e.arguments[1])+re.signExt(e.arguments[2],12),null}))),r.push(new ce("ADDI",s,["opcode","funct3"],[19,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.arguments[2]),e.pc+=4,null}))),r.push(new ce("SLTI",s,["opcode","funct3"],[19,2],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.arguments[2]?1:0),e.pc+=4,null}))),r.push(new ce("SLTIU",s,["opcode","funct3"],[19,3],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0<e.arguments[2]>>>0?1:0),e.pc+=4,null}),!1)),r.push(new ce("XORI",s,["opcode","funct3"],[19,4],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0^e.arguments[2]),e.pc+=4,null}))),r.push(new ce("ORI",s,["opcode","funct3"],[19,6],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0|e.arguments[2]),e.pc+=4,null}))),r.push(new ce("ANDI",s,["opcode","funct3"],[19,7],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0&e.arguments[2]),e.pc+=4,null}))),n.push(new ue([new oe("imm",20,12,null,!0).parameterized(1,ae.immediate),new oe("rs1",15,5).parameterized(2,ae.register),new oe("funct3",12,3),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*(-?0?[boxd]?[0-9A-F]+)\s*\(\s*([A-Za-z0-9]+)\s*\)\s*$/,"@mnem @arg0, @arg2(@arg1)"));var i=n[n.length-1];r.push(new ce("LB",i,["opcode","funct3"],[3,0],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.signExt(t[0],8)),e.pc+=4,null)}))),r.push(new ce("LH",i,["opcode","funct3"],[3,1],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.signExt(re.catBytes(t),16)),e.pc+=4,null)}))),r.push(new ce("LW",i,["opcode","funct3"],[3,2],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],4);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.catBytes(t)),e.pc+=4,null)}))),r.push(new ce("LBU",i,["opcode","funct3"],[3,4],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],t[0]),e.pc+=4,null)}))),r.push(new ce("LHU",i,["opcode","funct3"],[3,5],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.catBytes(t)),e.pc+=4,null)}))),n.push(new ue([new oe("funct7",25,7),new oe("shamt",20,5).parameterized(2,ae.immediate),new oe("rs1",15,5).parameterized(1,ae.register),new oe("funct3",12,3),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+),\s*(-?0?[boxd]?[0-9A-F]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var l=n[n.length-1];r.push(new ce("SLLI",l,["opcode","funct3","funct7"],[19,1,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.arguments[2]),e.pc+=4,null}))),r.push(new ce("SRLI",l,["opcode","funct3","funct7"],[19,5,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.arguments[2]),e.pc+=4,null}))),r.push(new ce("SRAI",l,["opcode","funct3","funct7"],[19,5,32],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.arguments[2]),e.pc+=4,null}))),n.push(new ue([new oe("imm",25,7,null,!0).parameterized(1,ae.immediate).limited(12,5,11),new oe("rs2",20,5).parameterized(0,ae.register),new oe("rs1",15,5).parameterized(2,ae.register),new oe("funct3",12,3),new oe("imm",7,5,null,!0).parameterized(1,ae.immediate).limited(12,0,4),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*(-?0?[boxd]?[0-9A-F]+)\(\s*([A-Za-z0-9]+)\s*\)\s*$/,"@mnem @arg0, @arg2(@arg1)"));var o=n[n.length-1];r.push(new ce("SB",o,["opcode","funct3"],[35,0],(function(e){var t=[];return t.push(255&e.registerFile.read(e.arguments[0])),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?(e.pc+=4,null):"Illegal memory access."}))),r.push(new ce("SH",o,["opcode","funct3"],[35,1],(function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?(e.pc+=4,null):"Illegal memory access."}))),r.push(new ce("SW",o,["opcode","funct3"],[35,2],(function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?(e.pc+=4,null):"Illegal memory access."}))),n.push(new ue([new oe("imm",12,20,null,!0).parameterized(1,ae.immediate),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var u=n[n.length-1];r.push(new ce("LUI",u,["opcode"],[55],(function(e){return e.registerFile.write(e.arguments[0],e.arguments[1]<<12),e.pc+=4,null}))),r.push(new ce("AUIPC",u,["opcode"],[23],(function(e){return e.registerFile.write(e.arguments[0],(e.arguments[1]<<12)+e.pc),e.pc+=4,null}))),n.push(new ue([new oe("imm",31,1,null,!0).parameterized(2,ae.offset).limited(13,12,12),new oe("imm",25,6,null,!0).parameterized(2,ae.offset).limited(13,5,10),new oe("rs2",20,5).parameterized(1,ae.register),new oe("rs1",15,5).parameterized(0,ae.register),new oe("funct3",12,3),new oe("imm",8,4,null,!0).parameterized(2,ae.offset).limited(13,1,4),new oe("imm",7,1,null,!0).parameterized(2,ae.offset).limited(13,11,11),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*,\s*([a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var c=n[n.length-1];r.push(new ce("BEQ",c,["opcode","funct3"],[99,0],(function(e){return e.registerFile.read(e.arguments[0])===e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null}))),r.push(new ce("BNE",c,["opcode","funct3"],[99,1],(function(e){return e.registerFile.read(e.arguments[0])!==e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null}))),r.push(new ce("BLT",c,["opcode","funct3"],[99,4],(function(e){return e.registerFile.read(e.arguments[0])<e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null}))),r.push(new ce("BGE",c,["opcode","funct3"],[99,5],(function(e){return e.registerFile.read(e.arguments[0])>=e.registerFile.read(e.arguments[1])?e.pc+=e.arguments[2]:e.pc+=4,null}))),r.push(new ce("BLTU",c,["opcode","funct3"],[99,6],(function(e){return e.registerFile.read(e.arguments[0])>>>0<e.registerFile.read(e.arguments[1])>>>0?e.pc+=e.arguments[2]:e.pc+=4,null}))),r.push(new ce("BGEU",c,["opcode","funct3"],[99,7],(function(e){return e.registerFile.read(e.arguments[0])>>>0>=e.registerFile.read(e.arguments[1])>>>0?e.pc+=e.arguments[2]:e.pc+=4,null}))),n.push(new ue([new oe("imm",31,1,null,!0).parameterized(1,ae.offset).limited(21,20,20),new oe("imm",21,10,null,!0).parameterized(1,ae.offset).limited(21,1,10),new oe("imm",20,1,null,!0).parameterized(1,ae.offset).limited(21,11,11),new oe("imm",12,8,null,!0).parameterized(1,ae.offset).limited(21,12,19),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var p=n[n.length-1];r.push(new ce("JAL",p,["opcode"],[111],(function(e){return e.registerFile.write(e.arguments[0],e.pc+4),e.pc+=re.signExt(e.arguments[1],21),null}))),n.push(new ue([new oe("const",0,32)],/^\s*([a-zA-Z]+)\s*$/,"@mnem"));var d=n[n.length-1];r.push(new ce("ECALL",d,["const"],[115],(function(e){var t=e.virtualOS.ecall(e);return e.pc+=4,t}))),n.push(new ue([new oe("funct7",25,7),new oe("rs2",20,5).parameterized(1,ae.register),new oe("rs1",15,5),new oe("funct3",12,3),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*([A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1"));var m=n[n.length-1];r.push(new ce("MV",m,["opcode","funct3","rs1","funct7"],[51,0,0,0],(function(e){return null}),!1,["ADD"])),n.push(new ue([new oe("imm",20,12,null,!0).parameterized(1,ae.immediate),new oe("rs1",15,5),new oe("funct3",12,3),new oe("rd",7,5).parameterized(0,ae.register),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var g=n[n.length-1];r.push(new ce("LI",g,["opcode","funct3","rs1"],[19,0,0],(function(e){return null}),!1,["ADDI"])),r.push(new ce("LA",g,["opcode","funct3","rs1"],[19,0,0],(function(e){return null}),!1,["ADDI"])),n.push(new ue([new oe("imm",20,12,null,!0),new oe("rs1",15,5).parameterized(0,ae.register),new oe("funct3",12,3),new oe("rd",7,5),new oe("opcode",0,7)],/^\s*([a-zA-Z]+)\s*([A-Za-z0-9]+)\s*$/,"@mnem @arg0"));var h=n[n.length-1];r.push(new ce("JR",h,["opcode","rd","funct3","imm"],[103,0,0,0],(function(e){return null}),!1,["JALR"])),r.push(new ce("SCALL",d,["const"],[115],(function(e){return null}),!1,["ECALL"])),r.push(new ce("SYSCALL",d,["const"],[115],(function(e){return null}),!1,["ECALL"]));var f=[];f[ie.directive]=["\\."],f[ie.comment]=["#"],f[ie.label]=["\\:"],f[ie.stringMarker]=['\\"'],f[ie.charMarker]=["\\'"],f[ie.register]=["x"];var b=[];return b.text=le.text,b.data=le.data,b.string=le.cString,b.byte=le._8bit,b.half=le._16bit,b.word=le._32bit,new pe(32,n,r,[],["zero","ra","sp","gp","tp","t0","t1","t2","s0","s1","a0","a1","a2","a3","a4","a5","a6","a7","s2","s3","s4","s5","s6","s7","s8","s9","s10","s11","t3","t4","t5","t6"],f,b,!1,'    la a1, str\n    li a0, 4 #4 is the string print service number...\n    ecall\n    li a0, 10 #...and 10 is the program termination service number!\n    ecall\n.data\nstr:    .string "Hello, World!"')},core:Ie,options:["M"]};var Oe=function(){function e(t,n){Object(l.a)(this,e),this.physicalFile=[],this.modifiedRegisters=[];for(var r=0;r<32;r++)this.physicalFile.push(0),this.modifiedRegisters.push(!1);this.memorySize=t,this.physicalFile[29]=t,this.abiNames=n}return Object(o.a)(e,[{key:"print",value:function(){console.log("Registers\n------");for(var e=0;e<32;e++)console.log("$"+e.toString(),this.abiNames[e],this.physicalFile[e].toString(),(this.physicalFile[e]>>>0).toString(16).toUpperCase());console.log("------")}},{key:"read",value:function(e){return 0===e?0:this.physicalFile[e]}},{key:"write",value:function(e,t){this.physicalFile[e]=t,this.modifiedRegisters[e]=!0}},{key:"getRegisterCount",value:function(){return 32}},{key:"getModifiedRegisters",value:function(){for(var e=this.modifiedRegisters.slice(),t=0;t<this.getRegisterCount();t++)this.modifiedRegisters[t]=!1;return e}},{key:"reset",value:function(){for(var e=0;e<32;e++)this.physicalFile[e]=0,this.modifiedRegisters[e]=!1;this.physicalFile[29]=this.memorySize}}]),e}(),je=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e,r,a){var s;Object(l.a)(this,n),(s=t.call(this)).virtualOSServiceRegister=2,s.virtualOSArgumentVectorStart=4,s.virtualOSArgumentVectorEnd=7,s.instructionSet=a,s.pc=0,s.memorySize=e,s.virtualOS=r,s.registerFile=new Oe(e,a.abiNames),s.memory=new Array(e);for(var i=0;i<e;i++)s.memory[i]=0;return s}return Object(o.a)(n,[{key:"reset",value:function(){this.pc=0,this.memory=[];for(var e=0;e<this.memorySize;e++)this.memory[e]=0;this.registerFile.reset()}},{key:"fetch",value:function(){var e=this.memcpy(this.pc>>>0,4);return null===e?"Attempting to fetch from illegal memory address @".concat(this.pc):(this.pc+=4,this.fetched=re.catBytes(e),null)}}]),n}(fe);fe.factory.ISAs.MIPS={generator:function(e){var t=[],n=[];t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5).parameterized(1,ae.register),new oe("rt",16,5).parameterized(2,ae.register),new oe("rd",11,5).parameterized(0,ae.register),new oe("shamt",6,5,0),new oe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var r=t[t.length-1];n.push(new ce("ADD",r,["opcode","funct"],[0,32],(function(e){return e.registerFile.write(e.arguments[0],Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.add(Ae.a.BigInt(e.registerFile.read(e.arguments[1])),Ae.a.BigInt(e.registerFile.read(e.arguments[2]))),Ae.a.BigInt("0xFFFFFFFF")))),null}))),n.push(new ce("ADDU",r,["opcode","funct"],[0,33],(function(e){return e.registerFile.write(e.arguments[0],Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.add(Ae.a.BigInt(e.registerFile.read(e.arguments[1])),Ae.a.BigInt(e.registerFile.read(e.arguments[2]))),Ae.a.BigInt("0xFFFFFFFF")))),null}))),n.push(new ce("SUB",r,["opcode","funct"],[0,34],(function(e){return e.registerFile.write(e.arguments[0],Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.subtract(Ae.a.BigInt(e.registerFile.read(e.arguments[1])),Ae.a.BigInt(e.registerFile.read(e.arguments[2]))),Ae.a.BigInt("0xFFFFFFFF")))),null}))),n.push(new ce("SUBU",r,["opcode","funct"],[0,35],(function(e){return e.registerFile.write(e.arguments[0],Ae.a.toNumber(Ae.a.bitwiseAnd(Ae.a.subtract(Ae.a.BigInt(e.registerFile.read(e.arguments[1])),Ae.a.BigInt(e.registerFile.read(e.arguments[2]))),Ae.a.BigInt("0xFFFFFFFF")))),null}))),n.push(new ce("AND",r,["opcode","funct"],[0,36],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])&e.registerFile.read(e.arguments[2])),null}))),n.push(new ce("OR",r,["opcode","funct"],[0,37],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])|e.registerFile.read(e.arguments[2])),null}))),n.push(new ce("NOR",r,["opcode","funct"],[0,39],(function(e){return e.registerFile.write(e.arguments[0],~(e.registerFile.read(e.arguments[1])|e.registerFile.read(e.arguments[2]))),null}))),n.push(new ce("XOR",r,["opcode","funct"],[0,38],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])^e.registerFile.read(e.arguments[2])),null}))),n.push(new ce("SLT",r,["opcode","funct"],[0,42],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.registerFile.read(e.arguments[2])?1:0),null}))),n.push(new ce("SLLV",r,["opcode","funct"],[0,4],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.registerFile.read(e.arguments[2])),null}))),n.push(new ce("SRLV",r,["opcode","funct"],[0,6],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.registerFile.read(e.arguments[2])),null}))),n.push(new ce("SRAV",r,["opcode","funct"],[0,7],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.registerFile.read(e.arguments[2])),null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5).parameterized(0,ae.register),new oe("rt",16,5,0),new oe("rd",11,5,0),new oe("shamt",6,5,0),new oe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*$/,"@mnem @arg0"));var a=t[t.length-1];n.push(new ce("JR",a,["opcode","funct"],[0,8],(function(e){return e.pc=e.registerFile.read(e.arguments[0]),null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5,0),new oe("rt",16,5).parameterized(1,ae.register),new oe("rd",11,5).parameterized(0,ae.register),new oe("shamt",6,5).parameterized(2,ae.immediate),new oe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*([0-9]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var s=t[t.length-1];n.push(new ce("SLL",s,["opcode","funct"],[0,0],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<<e.arguments[2]),null}))),n.push(new ce("SRL",s,["opcode","funct"],[0,2],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>e.arguments[2]),null}))),n.push(new ce("SRA",s,["opcode","funct"],[0,2],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>e.arguments[2]),null}))),t.push(new ue([new oe("funct",0,32)],/^\s*([a-zA-Z]+)\s*$/,"@mnem"));var i=t[t.length-1];n.push(new ce("SYSCALL",i,["funct"],[12],(function(e){return e.virtualOS.ecall(e)}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5).parameterized(1,ae.register),new oe("rt",16,5).parameterized(0,ae.register),new oe("imm",0,16,null,!0).parameterized(2,ae.immediate)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var l=t[t.length-1];n.push(new ce("ADDI",l,["opcode"],[8],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.arguments[2]),null}))),n.push(new ce("ADDIU",l,["opcode"],[9],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])+e.arguments[2]),null}))),n.push(new ce("SLTI",l,["opcode"],[10],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])<e.arguments[2]?1:0),null}))),n.push(new ce("SLTIU",l,["opcode"],[11],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0<e.arguments[2]>>>0?1:0),null}))),n.push(new ce("ANDI",l,["opcode"],[12],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0&e.arguments[2]),null}))),n.push(new ce("ORI",l,["opcode"],[13],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0|e.arguments[2]),null}))),n.push(new ce("XORI",l,["opcode"],[14],(function(e){return e.registerFile.write(e.arguments[0],e.registerFile.read(e.arguments[1])>>>0^e.arguments[2]),null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5).parameterized(0,ae.register),new oe("rt",16,5).parameterized(1,ae.register),new oe("imm",0,16,null,!0).parameterized(2,ae.offset).limited(18,2,17)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1, @arg2"));var o=t[t.length-1];n.push(new ce("BEQ",o,["opcode"],[4],(function(e){return e.registerFile.read(e.arguments[0])===e.registerFile.read(e.arguments[1])&&(e.pc+=e.arguments[2]),null}))),n.push(new ce("BNE",o,["opcode"],[5],(function(e){return e.registerFile.read(e.arguments[0])!==e.registerFile.read(e.arguments[1])&&(e.pc+=e.arguments[2]),null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5,0),new oe("rt",16,5).parameterized(0,ae.register),new oe("imm",0,16,null,!0).parameterized(1,ae.register)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var u=t[t.length-1];n.push(new ce("LUI",u,["opcode"],[15],(function(e){return e.registerFile.write(e.arguments[0],e.arguments[1]<<16),null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5).parameterized(2,ae.register),new oe("rt",16,5).parameterized(0,ae.register),new oe("imm",0,16,null,!0).parameterized(1,ae.immediate)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(-?0?[boxd]?[0-9A-F]+)\(\s*(\$[A-Za-z0-9]+)\s*\)\s*$/,"@mnem @arg0, @arg1(@arg2)"));var c=t[t.length-1];n.push(new ce("LB",c,["opcode"],[32],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.signExt(t[0],8)),null)}))),n.push(new ce("LH",c,["opcode"],[33],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.signExt(re.catBytes(t),16)),null)}))),n.push(new ce("LW",c,["opcode"],[35],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],4);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.catBytes(t)),null)}))),n.push(new ce("LBU",c,["opcode"],[36],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],1);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],t[0]),null)}))),n.push(new ce("LHU",c,["opcode"],[37],(function(e){var t=e.memcpy(e.registerFile.read(e.arguments[2])+e.arguments[1],2);return null===t?"Illegal memory access.":(e.registerFile.write(e.arguments[0],re.catBytes(t)),null)}))),n.push(new ce("SB",c,["opcode"],[40],(function(e){var t=[];t.push(255&e.registerFile.read(e.arguments[0]));var n=e.registerFile.read(e.arguments[2])+e.arguments[1];return e.memset(n,t)?null:"Illegal memory access."}))),n.push(new ce("SH",c,["opcode"],[41],(function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?null:"Illegal memory access."}))),n.push(new ce("SW",c,["opcode"],[43],(function(e){var t=[],n=e.registerFile.read(e.arguments[0]);return t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),n>>>=8,t.push(255&n),e.memset(e.registerFile.read(e.arguments[2])+e.arguments[1],t)?null:"Illegal memory access."}))),t.push(new ue([new oe("opcode",26,6),new oe("imm",0,26).parameterized(0,ae.special)],/^\s*([A-Za-z]+)\s*([A-Za-z0-9_]+)\s*$/,"@mnem @arg0",(function(e,t,n,r,a){var s={errorMessage:null,context:null,value:null},i=null,l=a.linesByLabel[e];if(void 0!==l){if(s.context=l[0],null===l[1])return s;i=l[1]}if(null===i&&a.keywordRegexes[ie.char]){var o=a.keywordRegexes[ie.char].exec(e);if(null!==o&&void 0!==o[1]&&(i=o[1].charCodeAt(0))>255)return s.errorMessage="Non-ascii character "+o[1]+" unsupported.",s}if(null===i&&void 0!==a.keywordRegexes[ie.numeric]){var u=a.keywordRegexes[ie.numeric].exec(e);if(null!==u){var c=Assembler.radixes[u[2]]||10,p=u[1];i=parseInt(p,c)}}return null===i||isNaN(i)?(s.errorMessage="args.valueUnrecognized(".concat(e,")"),s):(i>>>28===r>>>28?0===(3&i)?s.value=(268435452&i)>>>2:s.errorMessage="mips.wordUnlignedJump(".concat(e,")"):s.errorMessage="args.outOfRange(".concat(e,")"),s)}),(function(e,t){return e<<2|4026531840&t})));var p=t[t.length-1];n.push(new ce("J",p,["opcode"],[2],(function(e){return e.pc=e.arguments[0],null}))),n.push(new ce("JAL",p,["opcode"],[3],(function(e){return e.registerFile.write(31,e.pc),e.pc=e.arguments[0],null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5).parameterized(1,ae.register),new oe("rt",16,5,0),new oe("rd",11,5).parameterized(0,ae.register),new oe("shamt",6,5,0),new oe("funct",0,6)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(\$[A-Za-z0-9]+)\s*$/,"@mnem @arg0, @arg1"));var d=t[t.length-1];n.push(new ce("MV",d,["opcode","funct"],[0,32],(function(e){return null}))),t.push(new ue([new oe("opcode",26,6),new oe("rs",21,5,0),new oe("rt",16,5).parameterized(0,ae.register),new oe("imm",0,16,null,!0).parameterized(1,ae.immediate)],/^\s*([a-zA-Z]+)\s*(\$[A-Za-z0-9]+)\s*,\s*(-?[a-zA-Z0-9_]+)\s*$/,"@mnem @arg0, @arg1"));var m=t[t.length-1];n.push(new ce("LI",m,["opcode"],[8],(function(e){return null}))),n.push(new ce("LA",m,["opcode"],[8],(function(e){return null})));var g=[];g[ie.directive]=["\\."],g[ie.comment]=["#"],g[ie.label]=["\\:"],g[ie.stringMarker]=['\\"'],g[ie.charMarker]=["\\'"],g[ie.register]=["x"];var h=[];return h.text=le.text,h.data=le.data,h.asciiz=le.cString,h.byte=le._8bit,h.half=le._16bit,h.word=le._32bit,new pe(32,t,n,[],["$zero","$at","$v0","$v1","$a0","$a1","$a2","$a3","$t0","$t1","$t2","$t3","$t4","$t5","$t6","$t7","$s0","$s1","$s2","$s3","$s4","$s5","$s6","$s7","$t8","$t9","$k0","$k1","$gp","$sp","$fp","$ra"],g,h,!0,'    la $a0, str\n    li $v0, 4 #4 is the string print service number...\n    syscall\n    li $v0, 10 #...and 10 is the program termination service number!\n    syscall\n.data\nstr:    .asciiz "Hello, World!"')},core:je,options:[]};var Te=n(31),xe=n(32),Re=0,ze=1,Be=2,Le=a.a.createElement("span",null,a.a.createElement("b",null,"Error: "),"Failed to decode instruction. In practice, the most likely cause is forgetting to terminate the program using the appropriate system call (see help section)."),Ne=0,De=1,Me=2,Ue=3,$e=4,Ze=5,Pe=function(e){Object(c.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).handleKeyPress=function(e){var t=r.props.selectedtab,n=r.props.tabs[t];if(n&&0!==n.console_input_type){e.preventDefault();var a=n.console_input,s=n.cursor_pos;if("Enter"===e.key)r.continueAfterConsole(a),n.console_input="";else if(8===e.which){if(s>0){var i=a.slice(0,s-1)+a.slice(s);n.cursor_pos=s-1,n.console_input=i}}else if(46===e.keyCode){if(s<a.length){var l=a.slice(0,s)+a.slice(s+1);n.cursor_pos=s-1,n.console_input=l}}else if(37===e.keyCode)s=s<=0?0:s-1,n.cursor_pos=s;else if(39===e.keyCode){var o=n.console_input.length;s=s>=o?o:s+1,n.cursor_pos=o}else{var u=e.key,c=e.keyCode,p=1===n.console_input_type;(c>47&&c<58||!p&&(32===c||13===c||c>64&&c<91||c>95&&c<112||c>185&&c<193||c>218&&c<223))&&(u=a.slice(0,s)+u+a.slice(s),n.console_input=u,n.cursor_pos=s+1)}return r.props.updateTab(t,n),!1}},r.addConsoleMessage=function(e,t){var n,s=r.props.selectedtab,i=r.props.tabs[s];n=e===Ze?"console_error":e===$e?"console_warning":e===Ue?"console_success":e===Me?"console_output":e===De?"console_input":"console_log",i.console.push(a.a.createElement("div",{className:n},t)),r.props.updateTab(s,i)},r.continueAfterConsole=function(e){var t=r.props.selectedtab,n=r.props.tabs[t],a=n.core;1===n.console_input_type?(e=parseInt(e,10),r.virtual_os.continueInputInt(a,e),r.addConsoleMessage(Ne,"<< "+e)):2===n.console_input_type&&(r.virtual_os.continueInputString(a,e),r.addConsoleMessage(Ne,"<< "+e)),n.console_input_type=0,r.checkUpdatedTabs(),r.props.updateTab(t,n)},r.checkUpdatedTabs=function(){for(var e=r.props.tabs[r.props.selectedtab],t=e.core.registerFile.getModifiedRegisters(),n=0;n<e.register_changed.length;++n)t[n]?e.register_changed[n]=2:2===e.register_changed[n]&&(e.register_changed[n]=1)},r.addTabFull=function(e,t,n,a,s,i){var l=r.props.tabs.length,o=be.Core.factory.getCore(s,a,r.virtual_os),u={name:e,content:i?o.instructionSet.exampleCode:t,log:[],console:[],machine_code:n,core:o,register_changed:[],runningStatus:Re,instruction_set:s,console_input:"",console_input_type:0,cursor_pos:0};u.register_changed=Array.from({length:o.registerFile.physicalFile.length},(function(){return 0})),r.props.setProjectSettings(e,a,s),r.props.addTab(u),r.props.selectTab(l)},r.addTab=function(e,t,n){r.addTabFull(e,t,n,4096,r.getDefaultISA(),!1)},r.addTabDefault=function(){r.addTabFull("New Tab","",[],4096,r.getDefaultISA(),!0)},r.addTabDefaultRISCV=function(){r.addTabFull("New Tab","",[],4096,"RISCV",!0)},r.addTabDefaultMIPS=function(){r.addTabFull("New Tab","",[],4096,"MIPS",!0)},r.getDefaultISA=function(){return be.Core.factory.getCoreList()[0]},r.handleUpload=function(e){var t=r.component_input.current.files;if(!(t.length<=0)){var n=t[0];if(r.is_upload_bin){var a=n.name,s=n.slice(0,n.size),i=new FileReader,l=Object(u.a)(r);i.addEventListener("load",(function(){var e=new Uint8Array(this.result);l.addTab(a,"",Array.from(e))})),i.readAsArrayBuffer(s)}else{var o=n.name,c=n.slice(0,n.size),p=new FileReader,d=Object(u.a)(r);p.addEventListener("load",(function(){var e=this.result;d.addTab(o,e,[])})),p.readAsText(c)}}},r.handleLoadAsm=function(){r.is_upload_bin=!1,r.component_input.current.click()},r.handleLoadBin=function(){r.is_upload_bin=!0,r.component_input.current.click()},r.handleDownloadAsm=function(){var e=r.props.selectedtab,t=r.props.tabs[e],n=t.content;if(0!==n.length){var a=document.createElement("a"),s=new Blob([n],{type:"text/plain"}),i=URL.createObjectURL(s),l=t.name+".s";a.setAttribute("href",i),a.setAttribute("download",l),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},r.downloadBin=function(){var e=r.props.selectedtab,t=r.props.tabs[e],n=t.machine_code,a=new Uint8Array(n),s=new Blob([a],{type:"application/octet-stream"}),i=URL.createObjectURL(s),l=document.createElement("a"),o=t.name+".bin";l.setAttribute("href",i),l.setAttribute("download",o),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},r.downloadBinH=function(){var e=r.props.selectedtab,t=r.props.tabs[e],n=t.machine_code.map((function(e){return e.toString(16).padStart(2,"0")})).join("\n"),a=new Blob([n],{type:"text/plain"}),s=URL.createObjectURL(a),i=document.createElement("a"),l=t.name+".hex";i.setAttribute("href",s),i.setAttribute("download",l),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)},r.downloadRam=function(){var e=r.props.selectedtab,t=r.props.tabs[e],n=t.core.memory,a=new Uint8Array(n),s=new Blob([a],{type:"application/octet-stream"}),i=URL.createObjectURL(s),l=document.createElement("a"),o=t.name+".bin";l.setAttribute("href",i),l.setAttribute("download",o),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},r.resetUI=function(){var e=r.props.selectedtab,t=r.props.tabs[e];t.log=[],t.console=[],t.register_changed=Array.from({length:t.register_changed.length},(function(){return 0})),t.runningStatus=Re,t.console_input="",t.console_input_type=0,t.cursor_pos=0,r.props.updateTab(e,t)},r.reset=function(){var e=r.props.selectedtab;r.props.tabs[e].core.reset(),r.resetUI()},r.uiSimulate=function(){var e=r.props.selectedtab,t=r.props.tabs[e];if(0===t.console_input_type){t.runningStatus===Re&&r.uiAssemble();var n=t.core;for(t.runningStatus=Be;;){var a=n.fetch();if(null!==a){r.addConsoleMessage(Ze,a),t.runningStatus=Re;break}var s=n.decode();if(null===s){r.addConsoleMessage(Ze,Le),t.runningStatus=Re;break}t.log.push(s);var i=n.execute();if(null!==i){"HALT"!==i&&"WAIT"!==i&&(r.addConsoleMessage(Ze,i),t.runningStatus=Re);break}}r.checkUpdatedTabs(),r.props.updateTab(e,t)}},r.uiStepByStep=function(){var e=r.props.selectedtab,t=r.props.tabs[e];if(0===t.console_input_type){t.runningStatus===Re&&r.uiAssemble();var n=t.core;t.runningStatus=ze;var a=n.fetch();if(null!==a)return r.addConsoleMessage(Ze,a),t.runningStatus=Re,void r.props.updateTab(e,t);var s=n.decode();if(null===s)return r.addConsoleMessage(Ze,Le),t.runningStatus=Re,void r.props.updateTab(e,t);t.log.push(s);var i=n.execute();null!==i&&"HALT"!==i&&"WAIT"!==i&&(r.addConsoleMessage(Ze,i),t.runningStatus=Re),r.checkUpdatedTabs(),r.props.updateTab(e,t)}},r.uiAssemble=function(){var e=r.props.selectedtab,t=r.props.tabs[e],n=t.content;if(""!==n){var s=t.core;r.reset();var i=new be.Assembler(s.instructionSet,be.Endianness.little),l=be.Line.arrayFromFile(n),o=i.assemble(l,0);if(0!==o.length)for(var u in o){var c=o[u];return void r.addConsoleMessage(Ze,a.a.createElement("span",null,a.a.createElement("b",null,"Assembly error on line ",c.number,":")," ",c.invalidReason,"."))}var p=null,d=1;do{if(0!==(p=i.assemble(l,d)).length)for(var m in p){var g=p[m];return void r.addConsoleMessage(Ze,a.a.createElement("span",null,a.a.createElement("b",null,"Assembly error on line ",g.number,":")," ",g.invalidReason,"."))}d+=1}while(null===p);var h=l.map((function(e){return e.machineCode})).reduce((function(e,t){return e.concat(t)}),[]);s.memset(0,h),r.checkUpdatedTabs();t.machine_code=h,r.addConsoleMessage(Ue,a.a.createElement("span",null,a.a.createElement("b",null,"Complete:")," Assembly succeeded.")),r.props.updateTab(e,t)}},r.handleSettingsChange=function(){var e=r.props.selectedtab,t=r.props.tabs[e];if(t){var n=r.props.project_settings.file_name,s=r.props.project_settings.isa,i=r.props.project_settings.memory_size;t.name=n;var l=s!==t.instruction_set,o=i!==t.core.memorySize,u=!1;if(l||o)be.Core.factory.ISAs[s]&&(u=!0,t.core=be.Core.factory.getCore(s,i,r.virtual_os,[]),t.instruction_set=s,r.resetUI()),u||r.addConsoleMessage(Ze,a.a.createElement("span",null,a.a.createElement("b",null,"Error: "),"Could not find ISA ",s,"."));r.props.updateTab(e,t),u&&(l&&r.addConsoleMessage(Ue,a.a.createElement("span",null,a.a.createElement("b",null,"Complete: "),"Successfully changed ISA to ",s,".")),o&&r.addConsoleMessage(Ue,a.a.createElement("span",null,a.a.createElement("b",null,"Complete: "),"Successfully changed memory size to"," ",i,".")))}},r.handleStartDragX=function(e){window.addEventListener("mousemove",r.handleDragX),window.addEventListener("mouseup",r.handleStopDragX)},r.handleX=function(e){var t=e.pageX,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;(t=n-t)<200?t=200:t>n-200&&(t=n-200),r.setState({panel_x:t})},r.handleX=function(e){var t=e.pageX,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;(t=n-t)<150?t=150:t>n-200&&(t=n-200),r.setState({panel_x:t})},r.handleY=function(e){var t=e.pageY+20,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;(t=n-t)<50?t=50:t>n-50&&(t=n-50),r.setState({panel_y:t})},r.handleDragX=function(e){r.handleX(e)},r.handleStopDragX=function(e){r.handleX(e),window.removeEventListener("mousemove",r.handleDragX),window.removeEventListener("mouseup",r.handleStopDragX)},r.handleStartDragY=function(e){window.addEventListener("mousemove",r.handleDragY),window.addEventListener("mouseup",r.handleStopDragY)},r.handleDragY=function(e){r.handleY(e)},r.handleStopDragY=function(e){r.handleY(e),window.removeEventListener("mousemove",r.handleDragY),window.removeEventListener("mouseup",r.handleStopDragY)},r.showSettings=function(){r.props.setSettingsVisible(!0)},r.showHelp=function(){r.props.setHelpVisible(!0)},r.showAbout=function(){alert(1),r.props.setAboutVisible(!0)},r.props.initialize({languages:[{name:"English",code:"en"}],options:{renderToStaticMarkup:Te.renderToStaticMarkup}}),r.state={panel_x:256,panel_y:256},r.component_input=a.a.createRef(),window.addEventListener("keyup",r.handleKeyPress),r.props.addTranslationForLanguage(xe,"en"),r.virtual_os=new be.VirtualOS,r.virtual_os.inputInt=function(){var e=r.props.tabs[r.props.selectedtab];e&&(e.console_input_type=1)},r.virtual_os.inputString=function(){var e=r.props.tabs[r.props.selectedtab];e&&(e.console_input_type=2)},r.virtual_os.outputInt=function(e){r.addConsoleMessage(Me,">> "+e)},r.virtual_os.outputString=function(e){r.addConsoleMessage(Me,">> "+e)},r.virtual_os.handleHalt=function(){var e=r.props.selectedtab,t=r.props.tabs[e];t&&(t.runningStatus=Re,r.addConsoleMessage(Ue," == SIMULATION COMPLETED == "),r.props.updateTab(e,t))},r.addTabDefault(),r}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.selectedtab,t=this.props.tabs[e],n=this.props.tabs.length>0,r=!1;return t&&(r=0!==t.console_input_type),a.a.createElement(a.a.Fragment,null,a.a.createElement(Y,null),a.a.createElement(K,null),a.a.createElement(Q,{canhandleinput:!r,fn_new:this.addTabDefault,fn_load:this.handleLoadAsm,fn_save:this.handleDownloadAsm,fn_ass:this.uiAssemble,fn_sim:this.uiSimulate,fn_step:this.uiStepByStep}),a.a.createElement(z,{assemble:this.uiAssemble,simulate:this.uiSimulate,stepbystep:this.uiStepByStep,downloadRam:this.downloadRam,downloadBin:this.downloadBin,downloadBinH:this.downloadBinH,handleAddTabRiscv:this.addTabDefaultRISCV,handleAddTabMips:this.addTabDefaultMIPS,handleLoadAsm:this.handleLoadAsm,handleLoadBin:this.handleLoadBin,handleDownloadAsm:this.handleDownloadAsm}),!n&&a.a.createElement("div",{className:"no_tabs"},a.a.createElement("div",null,a.a.createElement("h2",null,a.a.createElement(T.b,{id:"welcome.title"},"Welcome to Oak.js")),a.a.createElement("p",null,a.a.createElement(T.b,{id:"welcome.subtitle"},"Oak.js is an online javascript IDE, Assembler, Disassembler, and Simulator for assembly languages such as RISC-V and MIPS.")),a.a.createElement("button",{className:"button",onClick:this.addTabDefault},a.a.createElement(T.b,{id:"menus.add_tab"},"Add a Tab")),a.a.createElement("button",{className:"button",onClick:this.handleLoadAsm},a.a.createElement(T.b,{id:"menus.load_assembly"},"Load Assembly")),a.a.createElement("button",{className:"button",onClick:this.handleLoadBin},a.a.createElement(T.b,{id:"menus.load_binary"},"Load Binary")))),n&&a.a.createElement("div",{className:"grid",style:{gridTemplateColumns:"auto ".concat(this.state.panel_x,"px"),gridTemplateRows:"auto calc(".concat(this.state.panel_y,"px)")}},a.a.createElement(j,{is_disabled:r,addTab:this.addTabDefault}),a.a.createElement(B,{handleStartDrag:this.handleStartDragY,className:"panel_bottom"},a.a.createElement(Z,{show_input:r,input:t.console_input}),a.a.createElement(Se,null),a.a.createElement(M,null),a.a.createElement(V,null)),a.a.createElement(B,{handleStartDrag:this.handleStartDragX,className:"panel_side"},a.a.createElement(ye,{submitChanges:this.handleSettingsChange}),a.a.createElement(Ee,null),a.a.createElement(we,null))),a.a.createElement("input",{type:"file",onChange:this.handleUpload,ref:this.component_input}))}}]),n}(r.Component),Ve=Object(T.d)(Object(I.b)((function(e){return{tabs:e.tabs,selectedtab:e.selectedtab,project_settings:e.project_settings}}),(function(e,t){return{addTab:function(t){return e(function(e){return{type:h,tab:e}}(t))},updateTab:function(t,n){return e(A(t,n))},selectTab:function(t){return e(k(t))},setProjectSettings:function(t,n,r){return e(C(t,n,r))},setHelpVisible:function(t){return e(F(t))},setAboutVisible:function(t){return e(S(t))},setSettingsVisible:function(t){return e(E(t))}}}))(Pe)),He=n(11),Ke=n(18),Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAB":return[].concat(Object(Ke.a)(e),[t.tab]);case"UPDATE_TAB":return e.map((function(e,n){return n===t.index?Object.assign({},e,t.tab):e}));case"DELETE_TAB":return[].concat(Object(Ke.a)(e.slice(0,t.id)),Object(Ke.a)(e.slice(t.id+1)));default:return e}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TAB":return t.id;default:return e}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROJECT_SETTINGS":return t.payload;default:return e}},Ge=n(10),qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:!1,help:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HELP_VISIBLE":return Object(Ge.a)(Object(Ge.a)({},e),{},{help:t.state});case"SET_ABOUT_VISIBLE":return Object(Ge.a)(Object(Ge.a)({},e),{},{about:t.state});case"SET_SETTINGS_VISIBLE":return Object(Ge.a)(Object(Ge.a)({},e),{},{settings:t.state});default:return e}},Qe=Object(He.b)({tabs:Xe,selectedtab:We,global_settings:Ye,project_settings:Je,panel_visibility:qe,localize:T.c}),et=Object(He.c)(Qe,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(a.a.createElement(T.a,{store:et},a.a.createElement(I.a,{store:et},a.a.createElement(Ve,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.c021d99f.chunk.js.map